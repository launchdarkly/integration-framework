{
  "name": "ServiceNow Native App",
  "version": "1.0.0",
  "overview": "Create feature flag change requests in ServiceNow.",
  "description": "Efficiently comply with company-wide change management policies by embedding LaunchDarkly approvals into existing ServiceNow workflows.",
  "author": "LaunchDarkly",
  "supportEmail": "support@launchdarkly.com",
  "links": {
    "site": "https://www.servicenow.com/",
    "launchdarklyDocs": "https://docs.launchdarkly.com/integrations/servicenow",
    "privacyPolicy": "https://www.servicenow.com/privacy-statement.html"
  },
  "categories": ["approval"],
  "icons": {
    "square": "assets/images/servicenow-icon.svg",
    "horizontal": "assets/images/servicenow-horizontal.svg"
  },
  "requiresOAuth": true,
  "formVariables": [],
  "allowIntegrationConfigurations": true,
  "oauthIntegrationKey": "servicenow",
  "capabilities": {
    "approval": {
      "name": "ServiceNow",
      "allowApprovalIntegrationConfigurations": true,
      "allowAdditionalApprovalFormVariables": true,
      "environmentFormVariables": [],
      "approvalFormVariables": [],
      "creationRequest": {
        "endpoint": {
          "url": "{{oauth.baseURI}}/api/x_1551791_launch_0/approval_requests",
          "method": "POST",
          "headers": [
            {
              "name": "Authorization",
              "value": "Bearer {{oauth.accessToken}}"
            }
          ]
        },
        "jsonBody": "{\"approval_id\": \"{{approvalId}}\", \"title\": \"{{{title.plainText}}}\", \"description\": \"{{_links.approval.href}}\\n\\n{{{details.plainText}}}\", \"requested_by\": \"{{{member.email}}}\", \"start_date\": \"{{timestamp.simple}}\", \"end_date\": \"{{formatWithOffset timestamp.milliseconds 301 'simple'}}\", \"approval_form_variables\": { {{#each approvalFormVariables}} \"{{@key}}\": \"{{this}}\"{{#if @last}}{{else}},{{/if}}{{/each}} } }",
        "parser": {
          "approvalId": "/result/record",
          "statusValue": "/result/status/value",
          "statusDisplay": "/result/status/display_value",
          "approvalMatcher": "^approved$",
          "rejectionMatcher": "^rejected$",
          "urlTemplate": "{{oauth.baseURI}}/api/x_1551791_launch_0/approval_requests/redirect?id={{queryEncode context.approvalId}}"
        }
      },
      "statusRequest": {
        "endpoint": {
          "url": "{{oauth.baseURI}}/api/x_1551791_launch_0/approval_requests/{{context.approvalId}}",
          "method": "GET",
          "headers": [
            {
              "name": "Authorization",
              "value": "Bearer {{oauth.accessToken}}"
            }
          ]
        },
        "parser": {
          "statusValue": "/result/status/value",
          "statusDisplay": "/result/status/display_value",
          "approvalMatcher": "^approved$",
          "rejectionMatcher": "^rejected$"
        }
      },
      "postApplyRequest": {
        "endpoint": {
          "url": "{{oauth.baseURI}}/api/x_1551791_launch_0/approval_requests/{{context.approvalId}}/apply",
          "method": "POST",
          "headers": [
            {
              "name": "Authorization",
              "value": "Bearer {{oauth.accessToken}}"
            }
          ]
        },
        "parser": {
          "statusValue": "/result/status/value",
          "statusDisplay": "/result/status/display_value",
          "approvalMatcher": "^approved$",
          "rejectionMatcher": "^rejected$"
        }
      },
      "deletionRequest": {
        "endpoint": {
          "url": "{{oauth.baseURI}}/api/x_1551791_launch_0/approval_requests/{{context.approvalId}}/delete",
          "method": "POST",
          "headers": [
            {
              "name": "Authorization",
              "value": "Bearer {{oauth.accessToken}}"
            }
          ]
        },
        "parser": {
          "statusValue": "/result/status/value",
          "statusDisplay": "/result/status/display_value",
          "approvalMatcher": "^approved$",
          "rejectionMatcher": "^rejected$"
        }
      }
    }
  }
}
